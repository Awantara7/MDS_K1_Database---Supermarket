"0",""
"0","# UI Dashboard"
"0","ui <- dashboardPage("
"0","  skin = ""blue"","
"0","  "
"0","  dashboardHeader("
"0","    title = ""ðŸ“Š Supermarket XXX"","
"0","    titleWidth = 300"
"0","  ),"
"0","  "
"0","  dashboardSidebar("
"0","    sidebarMenu("
"0","      menuItem(""Dashboard Utama"", tabName = ""main_dashboard"", icon = icon(""dashboard"")),"
"0","      menuItem(""Cabang"", tabName = ""penjualan"", icon = icon(""industry"")),"
"0","      menuItem(""Produk"", tabName = ""produk"", icon = icon(""gift"")),"
"0","      menuItem(""Pelanggan"", tabName = ""pelanggan"", icon = icon(""users""))"
"0","    )"
"0","  ),"
"0","  "
"0","  dashboardBody("
"0","    tabItems("
"0","      # Main Dashboard Tab"
"0","      tabItem(tabName = ""main_dashboard"","
"0","              fluidRow("
"0","                valueBoxOutput(""total_penjualan""),"
"0","                valueBoxOutput(""performacabang"")"
"0","              ),"
"0","              fluidRow("
"0","                leafletOutput(""map"", height = ""400px"")"
"0","              )"
"0","      ),"
"0","      "
"0","      # Penjualan per Cabang Tab"
"0","      tabItem(tabName = ""penjualan"","
"0","              fluidRow("
"0","                column(6, DTOutput(""penjualan_table"")),"
"0","                column(6, plotlyOutput(""penjualan_chart_detail""))"
"0","              )"
"0","      ),"
"0","      "
"0","      # Produk Terlaris Tab"
"0","      tabItem(tabName = ""produk"","
"0","              fluidRow("
"0","                column(6, DTOutput(""produk_table"")),"
"0","                column(6, plotlyOutput(""produk_chart""))"
"0","              )"
"0","      ),"
"0","      "
"0","      # Pelanggan Tab"
"0","      tabItem(tabName = ""pelanggan"","
"0","              fluidRow("
"0","                column(6, plotlyOutput(""gender_chart"")),"
"0","                column(6, plotlyOutput(""pelanggan_chart""))"
"0","              )"
"0","      )"
"0","    )"
"0","  )"
"0",")"
"0",""
"0","# Server"
"0","server <- function(input, output, session) {"
"0","  "
"0","  # Load Data & Refresh"
"0","  load_data <- reactive({"
"0","    invalidateLater(30000, session) # Refresh data every 30 seconds"
"0","    tbl_invoice %>% collect()      # Ambil data dari tabel invoice"
"0","  })"
"0","  "
"0","  # Total Penjualan"
"0","  output$total_penjualan <- renderValueBox({"
"0","    data <- load_data()"
"0","    total_penjualan <- sum(data$Total, na.rm = TRUE)  # Memastikan tidak ada NA yang mempengaruhi hasil"
"0","    valueBox("
"0","      formatC(total_penjualan, format = ""d"", big.mark = "",""),"
"0","      ""Total Penjualan"","
"0","      icon = icon(""credit-card""),"
"0","      color = ""aqua"""
"0","    )"
"0","  })"
"0","  "
"0","  # Performace Cabang"
"0","  output$performacabang <- renderValueBox({"
"0","    data <- load_data()"
"0","    # Agregasi performa penjualan berdasarkan ID Cabang"
"0","    cabang_performance <- data %>%"
"0","      group_by(ID_Cabang) %>%"
"0","      summarise(Total_Cabang = sum(Total, na.rm = TRUE)) %>%"
"0","      arrange(desc(Total_Cabang)) %>%"
"0","      slice(1)"
"0","    "
"0","    valueBox("
"0","      paste(""Cabang: "", cabang_performance$ID_Cabang, "" Total: "", formatC(cabang_performance$Total_Cabang, format = ""d"", big.mark = "","")),"
"0","      ""Performa Cabang Terbaik"","
"0","      icon = icon(""industry""),"
"0","      color = ""green"""
"0","    )"
"0","  })"
"0","  "
"0","  # Peta Lokasi Cabang (Koordinat)"
"0","  cabang_data <- data.frame("
"0","    ID_Cabang = c(""B0001"", ""B0002"", ""B0003""),"
"0","    Kota = c(""Naypyidaw"", ""Yangon"", ""Mandalay""),"
"0","    lat = c(19.752162400254907, 16.86873053516028, 21.93920096942228),"
"0","    lon = c(96.09634335734853, 96.14006796301643, 96.08698353742243)"
"0","  )"
"0","  "
"0","  output$map <- renderLeaflet({"
"0","    leaflet(cabang_data) %>%"
"0","      addTiles() %>%  # Menambahkan layer peta dasar"
"0","      addProviderTiles(providers$CartoDB.Positron) %>%  # Menambahkan layer CartoDB untuk peta lebih jelas"
"0","      addMarkers(~lon, ~lat, popup = ~paste(""Cabang: "", Kota))  # Menambahkan marker dengan popup nama kota"
"0","  })"
"0","}"
"0",""
"0","# Jalankan Aplikasi"
"0","shinyApp(ui, server)"
"2","
Listening on http://127.0.0.1:7675
"
